{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nnsou\\\\OneDrive\\\\Ambiente de Trabalho\\\\Covid-tracker-app\\\\src\\\\MainComponents\\\\MainChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Chart from 'chart.js/auto';\nimport { getHistoricalData } from '../API/GetAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MainChart = ({\n  activeTab\n}) => {\n  _s();\n  const [historicalData, setHistoricalData] = useState(null);\n  useEffect(() => {\n    const fetchHistoricalData = async () => {\n      try {\n        const data = await getHistoricalData();\n        setHistoricalData(data);\n      } catch (error) {\n        console.error('Error fetching historical data:', error);\n      }\n    };\n    fetchHistoricalData();\n  }, []);\n  useEffect(() => {\n    let chart = null;\n    if (historicalData) {\n      const ctx = document.getElementById('main-chart').getContext('2d');\n      if (chart) {\n        chart.destroy();\n      }\n      const datasetLabel = activeTab === 'cases' ? 'Cases' : activeTab === 'recovered' ? 'Recovered' : 'Deaths';\n      const filteredData = activeTab === 'recovered' ? Object.entries(historicalData[activeTab]).filter(([date, value]) => {\n        return value != null && new Date(date) <= new Date('2021-04-08');\n      }).reduce((acc, [date, value]) => {\n        acc[date] = value;\n        return acc;\n      }, {}) : historicalData[activeTab];\n      chart = new Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: Object.keys(filteredData),\n          datasets: [{\n            label: datasetLabel,\n            data: Object.values(filteredData),\n            borderColor: activeTab === 'cases' ? 'rgb(101, 152, 223)' : activeTab === 'recovered' ? 'rgb(59, 147, 42)' : 'grey',\n            fill: true,\n            backgroundColor: activeTab === 'cases' ? 'white' : activeTab === 'recovered' ? 'white' : 'white'\n          }]\n        },\n        options: {\n          scales: {\n            x: {\n              grid: {\n                display: false\n              }\n            },\n            y: {\n              grid: {\n                display: false\n              }\n            }\n          }\n        }\n      });\n    }\n    return () => {\n      if (chart) {\n        chart.destroy();\n      }\n    };\n  }, [historicalData, activeTab]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"main-chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(MainChart, \"FScUJ42MDx+0fnk7CLMeRgY/HJ0=\");\n_c = MainChart;\nexport default MainChart;\nvar _c;\n$RefreshReg$(_c, \"MainChart\");","map":{"version":3,"names":["React","useEffect","useState","Chart","getHistoricalData","jsxDEV","_jsxDEV","MainChart","activeTab","_s","historicalData","setHistoricalData","fetchHistoricalData","data","error","console","chart","ctx","document","getElementById","getContext","destroy","datasetLabel","filteredData","Object","entries","filter","date","value","Date","reduce","acc","type","labels","keys","datasets","label","values","borderColor","fill","backgroundColor","options","scales","x","grid","display","y","style","width","height","children","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/nnsou/OneDrive/Ambiente de Trabalho/Covid-tracker-app/src/MainComponents/MainChart.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Chart from 'chart.js/auto';\r\nimport { getHistoricalData } from '../API/GetAPI';\r\n\r\n\r\nconst MainChart = ({ activeTab }) => {\r\n  const [historicalData, setHistoricalData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchHistoricalData = async () => {\r\n      try {\r\n        const data = await getHistoricalData();\r\n        setHistoricalData(data);\r\n      } catch (error) {\r\n        console.error('Error fetching historical data:', error);\r\n      }\r\n    };\r\n\r\n    fetchHistoricalData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let chart = null;\r\n\r\n    if(historicalData) {\r\n\r\n      const ctx = document.getElementById('main-chart').getContext('2d');\r\n      if(chart) {\r\n        chart.destroy();\r\n      }\r\n\r\n      const datasetLabel =\r\n        activeTab === 'cases' ? 'Cases'\r\n        : activeTab === 'recovered' ? 'Recovered'\r\n        : 'Deaths';\r\n\r\n      const filteredData =\r\n        activeTab === 'recovered'\r\n        ? Object.entries(historicalData[activeTab])\r\n          .filter(([date, value]) => {\r\n            return value != null && new Date(date) <= new Date('2021-04-08');\r\n          }) \r\n          .reduce((acc, [date, value]) => {\r\n            acc[date] = value;\r\n            return acc;\r\n          }, {})\r\n          : historicalData[activeTab];\r\n\r\n      chart = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels: Object.keys(filteredData),\r\n          datasets: [\r\n            {\r\n              label: datasetLabel,\r\n              data: Object.values(filteredData),\r\n              borderColor: activeTab === 'cases' ? 'rgb(101, 152, 223)'\r\n                : activeTab === 'recovered' ? 'rgb(59, 147, 42)'\r\n                : 'grey',\r\n              fill: true,\r\n              backgroundColor: activeTab === 'cases' ? 'white'\r\n                : activeTab === 'recovered' ? 'white'\r\n                : 'white',\r\n            },\r\n          ],\r\n        },\r\n        options: {\r\n          scales: {\r\n            x: {\r\n              grid: {\r\n                display: false,\r\n              },\r\n            },\r\n            y: {\r\n              grid: {\r\n                display: false,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (chart) {\r\n        chart.destroy();\r\n      }\r\n    };\r\n  }, [historicalData, activeTab]);\r\n  \r\n  return (\r\n    <div style={{ width: '100%', height: '100%' }}>\r\n      <canvas id=\"main-chart\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainChart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}